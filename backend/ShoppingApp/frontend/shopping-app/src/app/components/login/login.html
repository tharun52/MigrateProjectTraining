<div class="container mt-5">
    <h2>Login</h2>

    <!-- Error message -->
    @if (error) {
        <div class="alert alert-danger">{{ error }}</div>
    }

    <!-- âœ… FIX: Add formGroup here -->
    <form [formGroup]="loginForm" (ngSubmit)="handleLogin()">
        <!-- Username -->
        <div class="mb-3">
            <input type="text" class="form-control" placeholder="Username" formControlName="un" />
            @if (un?.touched && un?.invalid) {
                <div class="text-danger mt-1">Username is required</div>
            }
        </div>

        <!-- Password -->
        <div class="mb-3">
            <input type="password" class="form-control" placeholder="Password" formControlName="pass" />
            @if (pass?.touched && pass?.invalid) {
                <div class="text-danger mt-1">Password is required</div>
            }
        </div>

        <!-- Submit button -->
        <button class="btn btn-primary" type="submit" [disabled]="loginForm.invalid || loading">
            @if (!loading) {
                Login
            } @else {
                <span class="spinner-border spinner-border-sm" role="status"></span>
                Logging in...
            }
        </button>
    </form>
</div>
