<div class="container mt-5">
  <h2>Signup as Admin</h2>

  @if (error) {
    <div class="alert alert-danger">{{ error }}</div>
  }

  <form [formGroup]="signupForm" (ngSubmit)="handleSignup()">
    <div class="mb-3">
      <input type="text" class="form-control" placeholder="Username" formControlName="username" />
      @if (username?.touched && username?.invalid) {
        <div class="text-danger mt-1">
          Username is required
        </div>
      }
    </div>

    <div class="mb-3">
      <input type="password" class="form-control" placeholder="Password" formControlName="password" />
      @if (password?.touched && password?.invalid) {
        <div class="text-danger mt-1">
          Password is required (min 6 characters)
        </div>
      }
    </div>

    <div class="mb-3">
      <input type="password" class="form-control" placeholder="Confirm Password" formControlName="confirmPassword" />
      @if (confirmPassword?.touched && confirmPassword?.invalid) {
        <div class="text-danger mt-1">
          Confirm Password is required
        </div>
      }
      @if (signupForm.errors?.['passwordMismatch'] && confirmPassword?.touched) {
        <div class="text-danger mt-1">
          Passwords do not match
        </div>
      }
    </div>

    <div class="mb-3">
      <input type="text" class="form-control" placeholder="Secret Key" formControlName="secretKey" />
      @if (secretKey?.touched && secretKey?.invalid) {
        <div class="text-danger mt-1">
          Secret Key is required
        </div>
      }
    </div>

    <button class="btn btn-primary" type="submit" [disabled]="signupForm.invalid || loading">
      @if (!loading) {
        Signup as Admin
      }
      @else {
        <span class="spinner-border spinner-border-sm" role="status"></span> Signing up...
      }
    </button>
  </form>
</div>
